<!DOCTYPE html>
<html>
<head>
  <title>Image Graph v3</title>
  <style>
    .grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(126px, 1fr)); /* each card is now twice as big */
      grid-gap: 10px;
      padding: 10px;
    }

    .grid-item {
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(0, 0, 0, 0.8);
      padding: 20px;
      font-size: 15px; /* reduced font size to fit the card */
      text-align: center;
      width: 126px;   /* approximate width of a playing card */
      height: 176px;  /* approximate height of a playing card */
    }

    .grid-item img {
      width: 100%;  
      height: 85%; /* leave some space for the alt_text */
      object-fit: cover;
    }

    .grid-item a {
      color: black;
      text-decoration: none;
    }

    .grid-item a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

<h1>Image Grid</h1>

<div class="grid-container" id="grid-container">
  <!-- JavaScript will insert the grid items here -->
</div>

<script src="https://d3js.org/d3.v5.min.js"></script>
<script>
  d3.csv("image-graph.csv").then(function(data) {
    var container = document.getElementById('grid-container');

    data.forEach(function(item, i) {
      var gridItem = document.createElement('div');
      gridItem.className = 'grid-item';

      var img = document.createElement('img');
      img.style.display = 'none'; // initially, the image is hidden

      // Load the image after a delay, to avoid loading all images at once
      setTimeout(function() {
        img.src = item.url;
        img.style.display = 'block'; // when the image is loaded, display it
      }, i * 200); // each image is loaded 200ms after the previous one

      img.alt = item.alt_text;
      img.style.objectFit = "cover";

      var a = document.createElement('a');
      a.href = item.source;
      a.textContent = item.alt_text;

      gridItem.appendChild(img);
      gridItem.appendChild(a);

      container.appendChild(gridItem);
    });
  }).catch(function(error) {
    console.log(error);
  });
</script>

</body>
</html>
