<!DOCTYPE html>
<html>
<head>
  <title>Word Cloud v10</title>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/d3-cloud"></script>
  <style>
    body { font-family: 'Comic Sans MS', 'Chalkboard SE', 'Comic Neue', sans-serif; overflow: hidden; margin: 0px; background: #fff; }
    text { cursor: default; }
    svg { border: 1px solid black; }  // Border around SVG for troubleshooting
  </style>
</head>
<body>
  <script>
    // Use the full page size
    var width = window.innerWidth;
    var height = window.innerHeight;

    var svg = d3.select('body').append('svg')
      .attr('width', width)
      .attr('height', height);

    d3.csv('word_freq.csv').then(function(data) {
      var layout = d3.layout.cloud()
        .size([width, height])
        .words(data)
        .padding(1)  // Smaller padding to make words closer together
        .rotate(0)  // Make words horizontal
        .font('Comic Sans MS')  // Use a fun typescript
        .fontSize(function(d) { return 2 * d.size; })  // Bigger text size
        .on('end', draw);

      layout.start();

      function draw(words) {
        var wordElements = svg.append('g')
          .attr('transform', 'translate(' + [width / 2, height / 2] + ')')
          .selectAll('text')
          .data(words)
          .enter().append('text')
          .style('font-size', function(d) { return d.size + 'px'; })
          .style('font-family', 'Comic Sans MS')
          .style('fill', function() { return 'hsl(' + Math.random() * 360 + ',100%,50%)'; })  // Random color
          .attr('text-anchor', 'middle')
          .attr('transform', function(d) { return 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')'; })
          .text(function(d) { return d.text; })
          .on('mouseover', function() { d3.select(this).style('font-weight', 'bold'); })  // Bold on hover
          .on('mouseout', function() { d3.select(this).style('font-weight', 'normal'); })  // Normal weight when not hovering
          .on('click', function(d) { 
            // On click, increase the size of the clicked word, make it bolder, and bring it to front
            wordElements
              .transition()
              .duration(1000)
              .style('font-size', function(dw) { return dw === d ? '60px' : (2 * dw.size + 'px'); })  // Large size on click, original size otherwise
              .style('font-weight', function(dw) { return dw === d ? 'bold' : 'normal'; });  // Bold on click, normal weight otherwise
            this.parentNode.appendChild(this);  // Bring to front
          });
      }
    });
  </script>
</body>
</html>
